<!-- Features Hero Section -->
<section class="features-hero">
  <div class="container">
    <div class="hero-content">
      <h1>Features that matters</h1>
      <p class="hero-subtitle">
        We focus on the features that matter most to you, so you can focus on what matters most to you. Our goal is to delivery a premium experience for our users.
      </p>
      <div class="feature-categories">
        @for (category of featureCategories; track category.id) {
          <button class="category-button" 
                  (click)="scrollToSection(category.id)">
            {{ category.title }}
          </button>
        }
      </div>
    </div>
  </div>
</section>



<!-- Feature Categories -->
@for (category of featureCategories; track category.id) {
  <section [id]="category.id" class="feature-section">
    <div class="container">
      <div class="section-header">
        <h2>{{ category.title }}</h2>
        @if (category.id === 'user-experience') {
          <p class="section-subheading">Intuitive design meets powerful functionality</p>
        }
        @if (category.id === 'scaling') {
          <p class="section-subheading">Enabling truly decentralized global scale for Nostr</p>
        }
        @if (category.id === 'infrastructure') {
          <p class="section-subheading">Built to scale with your needs and the network</p>
        }
        @if (category.id === 'cross-platform') {
          <p class="section-subheading">Use Nostria anywhere, on any device</p>
        }
      </div>
      
      <div class="features-grid">
        @for (feature of category.features; track feature.title) {
          <div class="feature-item">
            <div class="feature-icon" [style.background]="'linear-gradient(135deg, ' + feature.color + ', ' + feature.color + '80)'" >
              <span [class]="feature.icon"></span>
            </div>
            <div class="feature-content">
              <h3>{{ feature.title }}</h3>
              <p>{{ feature.description }}</p>
            </div>
          </div>
        }
      </div>
      
      <div class="feature-showcase" *ngIf="category.id === 'user-experience'">
        <img 
          src="assets/screenshots/nostria-02.jpg" 
          alt="Nostria User Interface" 
          class="feature-image" 
          (click)="openLightbox('assets/screenshots/nostria-02.jpg', 'Nostria User Interface')" />
        <div class="feature-details">
          <h3>A Beautiful Interface for Everyone</h3>
          <p>
            Whether you're new to Nostr or a power user, Nostria's interface adapts to your needs.
            Our design philosophy puts your content front and center while providing powerful tools
            right where you need them.
          </p>
          <ul class="feature-list">
            <li>Intuitive navigation for new users</li>
            <li>Keyboard shortcuts for power users</li>
            <li>Flexible layout options for any screen size</li>
            <li>Accessibility features built-in</li>
          </ul>
        </div>
      </div>
      
      <!-- <div class="feature-showcase reverse" *ngIf="category.id === 'performance'">
        <div class="feature-details">
          <h3>Performance That Feels Like Magic</h3>
          <p>
            Nostria is built from the ground up for performance. Our client intelligently manages resources
            to provide a smooth experience even on slower networks or devices. You'll notice the difference
            immediately when switching from other Nostr clients.
          </p>
          <ul class="feature-list">
            <li>Optimized startup sequence for instant access</li>
            <li>Progressive loading of content</li>
            <li>Intelligent caching to reduce network usage</li>
            <li>Battery-friendly operation on mobile devices</li>
          </ul>
        </div>
        <img 
          src="assets/diagrams/nostria-architecture.svg" 
          alt="Nostria Performance Metrics" 
          class="feature-image" 
          (click)="openLightbox('assets/diagrams/nostria-architecture.svg', 'Nostria Architecture')" />
      </div> -->
      
      <div class="feature-showcase reverse" *ngIf="category.id === 'scaling'">
        <div class="feature-details">
          <h3>Scaling Beyond Centralized Relays</h3>
          <p>
            Nostria is designed to enable true global scaling for the Nostr network. By intelligently 
            distributing users across appropriate relays rather than relying on massive centralized 
            servers, Nostria helps create a more resilient, faster, and truly decentralized network.
          </p>
          <p>
            Nostria believe everyone should have a great experience, regardless of their location on the globe. 
            We are hosting relays in multiple locations around the world. That means if you're living in Cape Town, 
            you'll be able to connect to a relay in your region and have very low latency.
          </p>
          <ul class="feature-list">
            <li>We host globally distributed Discovery Relays</li>
            <li>Connect directly to smaller user relays</li>
            <li>Everyone receive lower latency</li>
            <li>Reduced dependency on large centralized relays</li>
          </ul>
        </div>
        <img 
          src="assets/diagrams/nostria-architecture.svg" 
          alt="Nostria Scaling Architecture" 
          class="feature-image" 
          (click)="openLightbox('assets/diagrams/nostria-architecture.svg', 'Nostria Scaling Architecture')" />
      </div>
      
      <div class="feature-showcase" *ngIf="category.id === 'infrastructure'">
        <img 
          src="assets/diagrams/nostria-infrastructure.svg" 
          alt="Nostria Infrastructure" 
          class="feature-image" 
          (click)="openLightbox('assets/diagrams/nostria-infrastructure.svg', 'Nostria Infrastructure')" />
        <div class="feature-details">
          <h3>Infrastructure Built for Scale</h3>
          <p>
            Premium users enjoy access to Nostria's dedicated infrastructure, designed to enhance 
            your experience and ensure reliability. Our global network provides consistent performance 
            wherever you are in the world.
          </p>
          <ul class="feature-list">
            <li>Dedicated user relays for premium subscribers</li>
            <li>Media servers with high availability</li>
            <li>Discovery Relays for user discovery</li>
            <li>Geographically distributed infrastructure for global reach</li>
          </ul>
        </div>
      </div>
      
      <div class="feature-showcase reverse" *ngIf="category.id === 'cross-platform'">
        <div class="feature-details">
          <h3>Seamless Experience Across Devices</h3>
          <p>
            Start a conversation on your phone, continue it on your desktop, and finish it on your tablet.
            Nostria synchronizes your experience across all platforms, allowing you to stay connected
            no matter where you are or what device you're using.
          </p>
          <ul class="feature-list">
            <li>Native apps for all major platforms</li>
            <li>Real-time synchronization across devices</li>
            <li>Optimized interfaces for each form factor</li>
          </ul>
        </div>
        <img 
          src="assets/screenshots/nostria-bookmarks.jpg" 
          alt="Nostria on Multiple Devices" 
          class="feature-image" 
          (click)="openLightbox('assets/screenshots/nostria-bookmarks.jpg', 'Nostria Bookmarks')" />
      </div>
    </div>
  </section>
}

<!-- Learn Section (Migrated from learn component) -->
<section class="learn-section">
  <div class="container">
    <div class="section-container">
      @for (section of sections; track section.title) {
        <div class="info-card">
          <div class="card-header">
            <div class="icon-container">
              <span class="material-symbols-outlined">{{section.icon}}</span>
            </div>
            <h3 class="card-title">{{section.title}}</h3>
          </div>
          <div class="card-content">
            <p>{{section.content}}</p>
          </div>
        </div>
      }
    </div>

    <div class="features-section">
      <h2>Key Features</h2>
      <div class="key-features-grid">
        @for (feature of keyFeatures; track feature.title) {
          <div class="key-feature-item">
            <div class="feature-icon" [style.background]="'linear-gradient(135deg, ' + feature.color + ', ' + feature.color + '80)'">
              <span [class]="feature.icon"></span>
            </div>
            <h3>{{feature.title}}</h3>
            <p>{{feature.description}}</p>
          </div>
        }
      </div>
    </div>

    <div class="faq-section">
      <h2>Frequently Asked Questions</h2>
      <div class="accordion">
        @for (faq of faqs; track faq.question; let i = $index) {
          <div class="accordion-item">
            <div class="accordion-header" (click)="toggleFaq(i)">
              <h4>{{faq.question}}</h4>
              <span class="accordion-icon">{{ isFaqExpanded(i) ? '−' : '+' }}</span>
            </div>
            <div class="accordion-content" [class.expanded]="isFaqExpanded(i)">
              <p>{{faq.answer}}</p>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</section>

<!-- Call to Action -->
<section class="features-cta">
  <div class="container">
    <div class="cta-content">
      <h2>Ready to get started?</h2>
      <p>Join thousands of satisfied users and discover the best way to connect on Nostr</p>
      <div class="cta-buttons">
        <a href="https://nostria.app" target="_blank" class="btn btn-primary">
          Start Using Nostria
        </a>
        <a routerLink="/about" class="btn btn-outline">
          About Nostria
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Lightbox Modal -->
<div class="lightbox-overlay" [class.active]="showLightbox" (click)="closeLightbox()">
  <div class="lightbox-content" (click)="$event.stopPropagation()">
    <button class="lightbox-close" (click)="closeLightbox()">×</button>
    <img [src]="lightboxImageSrc" [alt]="lightboxAlt" />
    <div class="lightbox-caption">{{ lightboxAlt }}</div>
  </div>
</div>